# Tasks: Docusaurus Static Site for Physical AI Book

**Input**: Design documents from `/specs/1-docusaurus/`
**Prerequisites**: plan.md (complete), spec.md (complete), 3 ADRs (complete)

**Organization**: Tasks are grouped by user story to enable independent implementation and testing of each story. Tasks follow TDD approach with tests written FIRST before implementation.

**Branch**: `1-docusaurus`
**Date**: 2025-12-02

## Format: `[ID] [P?] [Story] Description`

- **[P]**: Can run in parallel (different files, no dependencies)
- **[Story]**: Which user story this task belongs to (US1, US2, US3, US4)
- Include exact file paths in descriptions
- **TDD**: All test tasks marked with üî¥ (RED) must be written FIRST and FAIL before implementation

## Path Conventions

This is a Docusaurus static site project with the following structure:
- **Content**: `docs/` (markdown chapters)
- **Configuration**: `docusaurus.config.js`, `sidebars.js`
- **Tests**: `tests/` (Playwright, axe-core, link validation)
- **CI/CD**: `.github/workflows/`
- **Static Assets**: `static/`

---

## Phase 1: Setup (Shared Infrastructure)

**Purpose**: Initialize Docusaurus project and basic structure

**Duration Estimate**: 1-2 days

**Human Review Checkpoint üõë**: After Phase 1, pause for review and approval before proceeding to Phase 2

- [X] T001 Verify Node.js 18+ installed and npm available in development environment
- [X] T002 [P] Initialize Docusaurus 3.x project using `npx create-docusaurus@latest physical-ai-book classic --typescript false`
- [X] T003 [P] Create GitHub repository and push initial Docusaurus scaffold
- [X] T004 Configure `docusaurus.config.js` with site metadata (title: "Physical AI Book", description, GitHub Pages URL, organizational metadata per ADR-001)
- [X] T005 [P] Configure Git ignore for `node_modules/`, `.docusaurus/`, `build/`, `.DS_Store`
- [X] T006 [P] Create README.md with setup instructions (Node.js requirements, installation, local development, deployment)
- [X] T007 Verify local development server runs without errors: `npm run start`
- [X] T008 Verify static build completes without errors: `npm run build`

**Checkpoint**: Foundation infrastructure ready - Node.js configured, Docusaurus initialized, local build working

---

## Phase 2: Foundational (Blocking Prerequisites)

**Purpose**: Core configuration and test infrastructure that MUST be complete before ANY user story implementation

**Duration Estimate**: 1-2 days

**‚ö†Ô∏è CRITICAL**: No user story work can begin until this phase is complete

**Human Review Checkpoint üõë**: After Phase 2, pause for review and approval before proceeding to Phase 3

### Configuration Foundation

- [X] T009 Define frontmatter schema in CONTRIBUTING.md documentation (required fields: title, description, difficulty, chapter, chapter_number; optional fields: learning_objectives, prerequisites, estimated_time, keywords per ADR-003)
- [X] T010 Create docs/ directory structure: `docs/intro.md`, `docs/chapter-01-foundations/`, `docs/chapter-02-mechanics/`, `docs/glossary.md` per ADR-003
- [X] T011 Configure `sidebars.js` with autogenerated sidebar structure for chapter-01-foundations and chapter-02-mechanics per ADR-003
- [X] T012 [P] Configure Prism syntax highlighting in `docusaurus.config.js` for Python, JavaScript, C++, Java, Rust, Go languages (FR-008)
- [X] T013 [P] Configure search plugin in `docusaurus.config.js` (use Docusaurus built-in search per ADR-001)

### Test Infrastructure Setup (TDD Foundation)

- [X] T014 Install Playwright as dev dependency: `npm install --save-dev @playwright/test`
- [X] T015 [P] Install axe-core for accessibility testing: `npm install --save-dev @axe-core/playwright`
- [X] T016 [P] Install Lighthouse CI: `npm install --save-dev @lhci/cli`
- [X] T017 Create `playwright.config.js` with browser configurations (Chromium, Firefox, WebKit) and base URL settings
- [X] T018 Create `.lighthouserc.js` with performance budgets (score ‚â•90, load time <3s per SC-006)
- [X] T019 Create `tests/` directory structure: `tests/navigation.test.js`, `tests/search.test.js`, `tests/accessibility.test.js`, `tests/links.test.js`, `tests/responsive.test.js`
- [X] T020 [P] Create test helpers in `tests/helpers/test-utils.js` (page load utilities, common assertions, viewport configurations)

**Checkpoint**: All configuration and test infrastructure complete - ready for user story implementation

---

## Phase 3: User Story 1 - Browse Physical AI Book Content (Priority: P1) üéØ MVP

**Goal**: Readers can browse book content through intuitive navigation with previous/next links and sidebar table of contents

**Independent Test**: Deploy site with sample content; verify readers can navigate homepage ‚Üí chapters via sidebar and use prev/next navigation

**Duration Estimate**: 3-5 days

**Human Review Checkpoint üõë**: After Phase 3, pause for MVP demo/review and approval before proceeding to Phase 4

### üî¥ RED: Tests for User Story 1 (Write FIRST, Ensure FAIL)

**TDD Workflow**: Write these tests, run them, verify they FAIL, then implement features

- [X] T021 üî¥ [P] [US1] Write navigation structure test in `tests/navigation.test.js`: verify sidebar displays, chapter links clickable, breadcrumbs present (should FAIL - no content yet)
- [X] T022 üî¥ [P] [US1] Write prev/next navigation test in `tests/navigation.test.js`: verify previous/next buttons exist on chapter pages and navigate correctly (should FAIL - no content yet)
- [X] T023 üî¥ [P] [US1] Write homepage test in `tests/navigation.test.js`: verify homepage loads, displays book title, shows introduction, provides entry points to chapters (should FAIL - no homepage content yet)
- [X] T024 üî¥ [P] [US1] Write content rendering test in `tests/navigation.test.js`: verify markdown renders (headings, lists, tables, images, code blocks) (should FAIL - no content yet)

**Checkpoint**: All US1 tests written and FAILING - ready for implementation

### üü¢ GREEN: Implementation for User Story 1

**Context7/MCP Integration Point** üìö: Use context7 MCP server to look up Docusaurus frontmatter documentation and sidebar configuration best practices

- [X] T025 [P] [US1] Create `docs/intro.md` with book introduction content and frontmatter (title, description, difficulty: beginner)
- [X] T026 [P] [US1] Create sample chapter `docs/chapter-01-foundations/index.md` with chapter overview and frontmatter (chapter: "Foundations", chapter_number: 1, learning_objectives)
- [X] T027 [P] [US1] Create sample sections in chapter-01: `docs/chapter-01-foundations/01-introduction.md`, `docs/chapter-01-foundations/02-history.md`, `docs/chapter-01-foundations/03-key-concepts.md` with full frontmatter per schema
- [X] T028 [P] [US1] Create sample chapter `docs/chapter-02-mechanics/index.md` and 3 sample sections with frontmatter
- [X] T029 [US1] Update `sidebars.js` to configure sidebar navigation tree with auto-generated chapter sections per ADR-003 (depends on T026-T028)
- [X] T030 [US1] Configure homepage in `docusaurus.config.js` to use `docs/intro.md` as landing page (FR-010)
- [X] T031 [US1] Verify previous/next navigation auto-generates from sidebar configuration (FR-004)
- [X] T032 [US1] Add custom CSS in `src/css/custom.css` for responsive typography (minimum 16px body font, readable line height per SC-004)

**Checkpoint**: Run tests - all US1 navigation tests should now PASS

### ‚ôªÔ∏è REFACTOR: Clean up User Story 1

- [X] T033 [US1] Review and optimize sidebar configuration (remove duplication, ensure clear hierarchy)
- [X] T034 [US1] Standardize frontmatter across all sample content files (validate all required fields present)
- [X] T035 [US1] Test manual navigation flow: homepage ‚Üí chapter in 2 clicks (validate SC-007)
- [X] T036 [US1] Verify site loads locally without errors and content is readable on desktop and mobile

**Checkpoint**: User Story 1 COMPLETE and TESTED - MVP functional (readers can browse content with navigation)

---

## Phase 4: User Story 2 - Search Book Content (Priority: P2)

**Goal**: Readers can search book content using full-text search and navigate to results

**Independent Test**: Use search box to query terms, verify results display with snippets and navigation works

**Duration Estimate**: 2-3 days

**Human Review Checkpoint üõë**: After Phase 4, pause for beta demo/review and approval before proceeding to Phase 5

### üî¥ RED: Tests for User Story 2 (Write FIRST, Ensure FAIL)

- [X] T037 üî¥ [P] [US2] Write search functionality test in `tests/search.test.js`: verify search box displays in navigation bar (should FAIL - search not configured yet)
- [X] T038 üî¥ [P] [US2] Write search query test in `tests/search.test.js`: verify search returns results for sample queries (e.g., "Physical AI", "robotics") within 1 second (should FAIL - search not functional yet)
- [X] T039 üî¥ [P] [US2] Write search result navigation test in `tests/search.test.js`: verify clicking search results navigates to correct page with term highlighting (should FAIL - search not implemented)
- [X] T040 üî¥ [P] [US2] Write "no results" state test in `tests/search.test.js`: verify search displays helpful message for non-existent queries (should FAIL - no error handling yet)

**Checkpoint**: All US2 tests written and FAILING - ready for implementation

### üü¢ GREEN: Implementation for User Story 2

**Context7/MCP Integration Point** üìö: Look up Docusaurus search plugin configuration and client-side search indexing documentation

- [X] T041 [US2] Enable Docusaurus built-in search plugin in `docusaurus.config.js` (configure search index settings per ADR-001)
- [X] T042 [US2] Configure search UI in theme settings (ensure search box visible in navigation bar per FR-003)
- [X] T043 [US2] Test search indexing by rebuilding site and verifying content is indexed: `npm run build`
- [X] T044 [US2] Verify search returns results for various keywords (test with content from chapter-01, chapter-02)
- [X] T045 [US2] Configure search result highlighting (ensure search terms highlighted in results and target pages)
- [X] T046 [US2] Add "no results" state handling in search configuration (display helpful message for empty results)

**Checkpoint**: Run tests - all US2 search tests should now PASS

### ‚ôªÔ∏è REFACTOR: Clean up User Story 2

- [X] T047 [US2] Optimize search configuration (tune relevance, result limits, indexing rules)
- [X] T048 [US2] Test search performance: verify p95 response time <1 second for 10 sample queries (validate SC-002)
- [X] T049 [US2] Test edge cases: special characters in queries, code syntax searches, non-English characters
- [X] T050 [US2] Verify search works correctly after new content added (test search re-indexing after content update)

**Checkpoint**: User Story 2 COMPLETE and TESTED (readers can search and find content quickly)

---

## Phase 5: User Story 3 - Automatic Deployment on Content Updates (Priority: P2)

**Goal**: Authors can push content changes to GitHub and site auto-deploys to GitHub Pages

**Independent Test**: Push a content change to main branch, verify site updates within 5 minutes

**Duration Estimate**: 3-4 days

**Human Review Checkpoint üõë**: After Phase 5, pause for CI/CD review and approval before proceeding to Phase 6

### üî¥ RED: Tests for User Story 3 (Write FIRST, Ensure FAIL)

- [x] T051 üî¥ [US3] Write link validation test in `tests/links.test.js`: verify all internal links resolve correctly (100% pass rate per SC-005) (should FAIL - no validation script yet)
- [x] T052 üî¥ [US3] Write accessibility test in `tests/accessibility.test.js`: run axe-core on homepage, chapter pages, search page; verify zero violations (should FAIL - axe-core not integrated)
- [x] T053 üî¥ [US3] Write keyboard navigation test in `tests/accessibility.test.js`: verify Tab, Enter, Arrow keys navigate site elements (should FAIL - not tested yet)
- [x] T054 üî¥ [US3] Write deployment smoke test in `tests/navigation.test.js`: verify deployed site is reachable and homepage loads (should FAIL - no deployment yet)

**Checkpoint**: All US3 tests written and FAILING - ready for CI/CD implementation

### üü¢ GREEN: Implementation for User Story 3

**Context7/MCP Integration Point** üìö: Look up GitHub Actions workflows for Docusaurus deployment to GitHub Pages and Playwright CI integration

- [x] T055 [US3] Create GitHub Actions workflow file `.github/workflows/deploy.yml` with basic structure (checkout, setup Node.js 18+, install dependencies per ADR-002)
- [x] T056 [US3] Add link validation step to workflow: install markdown-link-check or similar; check all docs/ files for broken links (FR-018)
- [x] T057 [US3] Add Playwright test execution step to workflow: run navigation, search, responsive tests (FR-015)
- [x] T058 [US3] Add axe-core accessibility test execution step to workflow: test homepage + 3 representative chapter pages (FR-016, FR-017 per ADR-002)
- [x] T059 [US3] Add Lighthouse CI step to workflow: test performance score ‚â•90 on homepage and sample chapters (SC-006 per ADR-002)
- [x] T060 [US3] Add Docusaurus build step to workflow: `npm run build` (generate static site)
- [x] T061 [US3] Add GitHub Pages deployment step to workflow: deploy to gh-pages branch (only if all tests pass per FR-014)
- [x] T062 [US3] Configure workflow to fail deployment if any test fails (keep previous version live per ADR-002)
- [x] T063 [US3] Configure GitHub repository settings: enable GitHub Pages on gh-pages branch with HTTPS enforced (FR-007)

**Checkpoint**: Run workflow - verify CI/CD pipeline runs and deploys site to GitHub Pages

### ‚ôªÔ∏è REFACTOR: Clean up User Story 3

- [x] T064 [US3] Optimize CI workflow: parallelize independent test steps (link validation + accessibility tests can run concurrently)
- [x] T065 [US3] Add workflow status badge to README.md (show build passing/failing status)
- [ ] T066 [US3] Test full deployment cycle: make content change ‚Üí push ‚Üí verify site updates within 5 minutes (validate SC-003)
- [ ] T067 [US3] Test deployment failure scenario: introduce broken link ‚Üí verify build fails ‚Üí verify previous site remains live
- [x] T068 [US3] Document CI/CD workflow in CONTRIBUTING.md (explain test gates, deployment process, rollback behavior)

**Checkpoint**: User Story 3 COMPLETE and TESTED (automated deployment with quality gates working)

---

## Phase 6: User Story 4 - Responsive Reading Experience (Priority: P3)

**Goal**: Readers can access site on any device with appropriate responsive layout

**Independent Test**: Access site on desktop, tablet, mobile; verify readability and navigation usability on each

**Duration Estimate**: 2-3 days

**Human Review Checkpoint üõë**: After Phase 6, pause for responsive testing review and approval before proceeding to Phase 7

### üî¥ RED: Tests for User Story 4 (Write FIRST, Ensure FAIL)

- [ ] T069 üî¥ [P] [US4] Write responsive layout test in `tests/responsive.test.js`: verify no horizontal scrolling on 320px to 2560px widths (should FAIL - not tested yet)
- [ ] T070 üî¥ [P] [US4] Write mobile navigation test in `tests/responsive.test.js`: verify sidebar converts to hamburger menu on mobile (<768px) (should FAIL - not configured yet)
- [ ] T071 üî¥ [P] [US4] Write tablet navigation test in `tests/responsive.test.js`: verify collapsible sidebar on tablet (768px-1024px) (should FAIL - not configured yet)
- [ ] T072 üî¥ [P] [US4] Write device rotation test in `tests/responsive.test.js`: verify layout adjusts on orientation change (portrait ‚Üî landscape) (should FAIL - not tested yet)
- [ ] T073 üî¥ [P] [US4] Write viewport typography test in `tests/responsive.test.js`: verify minimum 16px body font on all devices (should FAIL - not enforced yet per SC-004)

**Checkpoint**: All US4 tests written and FAILING - ready for responsive implementation

### üü¢ GREEN: Implementation for User Story 4

**Context7/MCP Integration Point** üìö: Look up Docusaurus responsive design configuration and CSS media query best practices

- [ ] T074 [US4] Review Docusaurus classic theme responsive breakpoints (verify default breakpoints meet requirements: 320px, 768px, 1024px, 2560px per FR-009)
- [ ] T075 [US4] Configure mobile navigation in `docusaurus.config.js` (ensure sidebar collapses to hamburger menu on mobile)
- [ ] T076 [US4] Add responsive CSS overrides in `src/css/custom.css` (ensure minimum 16px font, no horizontal scroll, proper spacing per SC-004)
- [ ] T077 [US4] Test responsive layout on 5 device sizes using Playwright viewports: 320px (mobile), 375px (mobile), 768px (tablet), 1024px (desktop), 2560px (large desktop)
- [ ] T078 [US4] Verify images are responsive (use `img { max-width: 100%; height: auto; }` to prevent overflow)
- [ ] T079 [US4] Test navigation usability on mobile: verify hamburger menu opens, sidebar links clickable, search accessible
- [ ] T080 [US4] Test device rotation: verify layout adapts smoothly from portrait to landscape on mobile/tablet

**Checkpoint**: Run tests - all US4 responsive tests should now PASS

### ‚ôªÔ∏è REFACTOR: Clean up User Story 4

- [ ] T081 [US4] Optimize responsive CSS (remove duplication, ensure consistent spacing across breakpoints)
- [ ] T082 [US4] Test on real devices if possible (iOS Safari, Android Chrome) or use browser DevTools device emulation
- [ ] T083 [US4] Verify touch targets are at least 44√ó44px for mobile usability (buttons, links, navigation)
- [ ] T084 [US4] Test with browser zoom levels (100%, 125%, 150%) to ensure readability for users with vision impairments

**Checkpoint**: User Story 4 COMPLETE and TESTED (responsive design working across all devices)

---

## Phase 7: Polish & Production Hardening (v1.0)

**Purpose**: Optimize performance, complete accessibility audit, and prepare for production launch

**Duration Estimate**: 2-3 days

**Human Review Checkpoint üõë**: After Phase 7, pause for final v1.0 review and approval before production launch

### Performance Optimization

- [ ] T085 [P] Optimize images in `static/img/`: compress images, convert to WebP format, implement lazy loading
- [ ] T086 [P] Configure bundle splitting in `docusaurus.config.js` (split vendor code, async chunks for better caching)
- [ ] T087 Run Lighthouse CI on production build: verify performance score ‚â•90 on homepage + 3 chapter pages (validate SC-006)
- [ ] T088 Test site load time on 50Mbps connection: verify <3 second complete load (validate SC-001)
- [ ] T089 Test site on throttled 3G (1Mbps) connection: verify site is usable (content loads, navigation works)

### Accessibility & Compliance (WCAG 2.1 AA)

- [ ] T090 Run full axe-core accessibility audit on all page types: homepage, chapter pages, search page, 404 page (validate SC-008)
- [ ] T091 Manual accessibility audit: test full keyboard navigation with Tab, Enter, Arrow keys (validate FR-017)
- [ ] T092 Test screen reader compatibility (NVDA on Windows or VoiceOver on macOS): verify all content is accessible
- [ ] T093 Verify color contrast ratios meet WCAG AA standards (4.5:1 for normal text, 3:1 for large text)
- [ ] T094 Verify all images have alt text (check all images in docs/ and static/ directories)
- [ ] T095 Fix any accessibility violations found in T090-T094 (update CSS, add ARIA labels, improve semantic HTML)

### SEO & Metadata

**Context7/MCP Integration Point** üìö: Look up Docusaurus SEO configuration and meta tags best practices

- [ ] T096 [P] Configure SEO meta tags in `docusaurus.config.js`: Open Graph tags, Twitter Card metadata (FR-011)
- [ ] T097 [P] Generate sitemap.xml (ensure Docusaurus sitemap plugin enabled)
- [ ] T098 [P] Create robots.txt in `static/robots.txt` (allow all pages for indexing)
- [ ] T099 Verify all pages have unique titles and descriptions (check frontmatter in all docs/ files)

### Error Handling & Edge Cases

- [ ] T100 Create custom 404 page in `src/pages/404.md` (helpful error message with links to homepage and search)
- [ ] T101 Test 404 behavior: navigate to non-existent URL, verify custom 404 page displays
- [ ] T102 Add build failure error messages documentation in CONTRIBUTING.md (common errors and fixes)
- [ ] T103 Test GitHub Pages service limits: verify site size <1GB, monitor bandwidth usage

### Scale & Load Testing

**Context7/MCP Integration Point** üìö: Look up Docusaurus build performance optimization for large sites

- [ ] T104 Create 500 pages of sample content to test scale (50 chapters √ó 10 sections per SC-010)
- [ ] T105 Run build with 500 pages: verify build completes in <10 minutes
- [ ] T106 Test site performance with 500 pages: verify load time and search performance do not degrade (validate SC-010)
- [ ] T107 Monitor build time in CI: verify builds succeed within GitHub Actions timeout limits

### Cross-Browser Testing

- [ ] T108 Test site on Chrome (latest 2 versions): verify all features work (navigation, search, responsive)
- [ ] T109 [P] Test site on Firefox (latest 2 versions): verify all features work
- [ ] T110 [P] Test site on Safari (latest 2 versions): verify all features work
- [ ] T111 [P] Test site on Edge (latest 2 versions): verify all features work
- [ ] T112 Document browser support policy in README.md (last 2 versions of major browsers)

### Monitoring & Documentation

- [ ] T113 Set up build success rate monitoring: track CI workflow pass/fail rate over 30 days (validate SC-009 target: ‚â•99%)
- [ ] T114 Create deployment runbook in docs/: document deployment process, rollback procedure, troubleshooting
- [ ] T115 Update README.md with production deployment instructions and GitHub Pages URL
- [ ] T116 Create CONTRIBUTING.md guide: document frontmatter schema, content structure, testing requirements, PR process

### Final Validation

- [ ] T117 Run ALL tests in CI: verify 100% test pass rate (link validation, accessibility, navigation, search, responsive, performance)
- [ ] T118 Manual end-to-end test: complete all user story acceptance scenarios (US1-US4)
- [ ] T119 Verify all 10 success criteria met (SC-001 through SC-010)
- [ ] T120 Final code review: check code quality, remove debug code, ensure clean commit history

**Checkpoint**: All tasks complete - ready for v1.0 production launch üöÄ

---

## Dependencies & Execution Order

### Phase Dependencies

- **Phase 1: Setup** ‚Üí No dependencies - start immediately
- **Phase 2: Foundational** ‚Üí Depends on Phase 1 complete - **BLOCKS all user stories**
- **Phase 3: User Story 1 (P1)** ‚Üí Depends on Phase 2 complete - MVP target
- **Phase 4: User Story 2 (P2)** ‚Üí Depends on Phase 2 complete (can run parallel to Phase 3 if staffed)
- **Phase 5: User Story 3 (P2)** ‚Üí Depends on Phase 2 complete AND Phase 3 complete (needs content for deployment testing)
- **Phase 6: User Story 4 (P3)** ‚Üí Depends on Phase 2 complete (can run parallel to other stories)
- **Phase 7: Polish** ‚Üí Depends on ALL user stories complete

### Critical Path (Sequential)

1. **Setup (Phase 1)** ‚Üí Initialize project
2. **Foundational (Phase 2)** ‚Üí Configure infrastructure (BLOCKS all stories)
3. **User Story 1 (Phase 3)** ‚Üí MVP content and navigation
4. **User Story 3 (Phase 5)** ‚Üí Deployment (depends on US1 content)
5. **Polish (Phase 7)** ‚Üí Production hardening

### Parallel Opportunities

**Within Phases**:
- All tasks marked [P] can run in parallel (different files, no dependencies)
- Phase 2: T012-T013 (search + syntax highlighting configuration)
- Phase 2: T015-T016 (test dependencies installation)

**Between Phases** (if team capacity allows):
- After Phase 2 complete:
  - **Developer A**: Phase 3 (User Story 1 - Browse Content)
  - **Developer B**: Phase 4 (User Story 2 - Search)
  - **Developer C**: Phase 6 (User Story 4 - Responsive)
- Phase 5 must wait for Phase 3 (needs content for deployment)

### TDD Workflow (Within Each User Story)

**RED-GREEN-REFACTOR Cycle**:
1. üî¥ **RED**: Write tests, run tests, verify FAIL
2. üü¢ **GREEN**: Implement minimal code to pass tests
3. ‚ôªÔ∏è **REFACTOR**: Clean up code while keeping tests passing

**Example for User Story 1**:
1. Write T021-T024 (navigation tests) ‚Üí Run ‚Üí FAIL ‚úÖ
2. Implement T025-T032 (content and navigation) ‚Üí Run tests ‚Üí PASS ‚úÖ
3. Execute T033-T036 (refactor and manual validation) ‚Üí Tests still PASS ‚úÖ

---

## Rollback & Traceability Strategy

### Git-Based Rollback

**Rollback Mechanisms**:
- Each phase creates a Git commit with clear message: `feat(phase-N): complete [phase name]`
- Each user story creates feature branch: `feature/us1-browse-content`, `feature/us2-search`, etc.
- Main branch protected: requires PR review and CI tests passing
- Failed deployments automatically keep previous version live (per T062)

**Traceability**:
- Each task maps to specific files/paths (enables precise rollback)
- Task IDs (T001-T120) referenced in commit messages: `feat: complete T025-T028 (sample content)`
- User story labels ([US1], [US2], [US3], [US4]) enable story-level rollback
- PHR (Prompt History Record) links tasks ‚Üí spec ‚Üí plan ‚Üí ADRs

**Rollback Commands**:
```bash
# Rollback to previous phase
git checkout <phase-commit-hash>

# Rollback specific user story
git revert <us-feature-branch-merge-commit>

# Rollback specific task (if isolated commit)
git revert <task-commit-hash>

# Emergency rollback in production (GitHub Pages)
# Redeploy previous gh-pages branch commit
git checkout gh-pages
git reset --hard <previous-commit>
git push --force origin gh-pages
```

### CI/CD Rollback

- Deployment failures keep previous site live (no automatic rollback needed per T062)
- Manual rollback via GitHub Actions: re-run previous successful workflow
- GitHub Pages deployment history available for 30 days

---

## Human Review Checkpoints Summary

**Phase 1 Complete üõë**: Review project setup, verify Node.js and Docusaurus initialized correctly
- **Approval Required**: Confirm foundation ready before proceeding to Phase 2

**Phase 2 Complete üõë**: Review configuration, verify test infrastructure set up correctly
- **Approval Required**: Confirm all foundational work complete before user story implementation

**Phase 3 Complete (MVP) üõë**: Demo User Story 1 - readers can browse content with navigation
- **Approval Required**: Validate MVP meets acceptance criteria before adding search

**Phase 4 Complete üõë**: Demo User Story 2 - readers can search book content
- **Approval Required**: Validate search functionality before proceeding to deployment

**Phase 5 Complete üõë**: Review CI/CD pipeline, verify automated deployment working
- **Approval Required**: Confirm deployment quality gates working before responsive work

**Phase 6 Complete üõë**: Demo responsive design on multiple devices
- **Approval Required**: Validate responsive experience before production hardening

**Phase 7 Complete (v1.0) üõë**: Final review of production-ready site
- **Approval Required**: Confirm all success criteria met, ready for launch

---

## Context7/MCP Integration Points Summary

**Documentation Lookups** (use context7 MCP server):

1. **Phase 3 (US1 - Content)**: Docusaurus frontmatter documentation, sidebar configuration best practices
2. **Phase 4 (US2 - Search)**: Docusaurus search plugin configuration, client-side search indexing
3. **Phase 5 (US3 - Deployment)**: GitHub Actions workflows for Docusaurus + GitHub Pages, Playwright CI integration
4. **Phase 6 (US4 - Responsive)**: Docusaurus responsive design configuration, CSS media query best practices
5. **Phase 7 (Polish - SEO)**: Docusaurus SEO configuration, meta tags best practices
6. **Phase 7 (Polish - Performance)**: Docusaurus build performance optimization for large sites

**MCP Usage Pattern**:
```bash
# Example: Look up Docusaurus frontmatter schema before T025-T028
context7 query "Docusaurus frontmatter schema documentation"

# Example: Look up GitHub Actions deployment before T055
context7 query "Docusaurus GitHub Pages deployment workflow"
```

---

## Success Criteria Validation

**How to verify each Success Criterion is met**:

- **SC-001**: Site loads in <3s on 50Mbps ‚Üí Test with WebPageTest (T088)
- **SC-002**: Search returns results in <1s (p95) ‚Üí Test with Playwright performance timing (T048)
- **SC-003**: Content updates live within 5 minutes ‚Üí Test full deployment cycle (T066)
- **SC-004**: No horizontal scroll 320px-2560px + 16px font ‚Üí Test with Playwright viewports (T077, T073)
- **SC-005**: 100% internal links resolve ‚Üí Automated link checker in CI (T056)
- **SC-006**: Lighthouse score ‚â•90 ‚Üí Lighthouse CI in workflow (T059, T087)
- **SC-007**: Navigate homepage ‚Üí chapter in ‚â§2 clicks ‚Üí Manual test (T035)
- **SC-008**: WCAG 2.1 AA zero violations ‚Üí axe-core tests + manual audit (T058, T090-T095)
- **SC-009**: Build success rate ‚â•99% over 30 days ‚Üí Monitor CI workflow (T113)
- **SC-010**: 500 pages without degradation ‚Üí Scale test (T104-T106)

---

## Constitutional Compliance Verification

**Verification that all constitutional principles are satisfied**:

| Principle | Requirement | Tasks Addressing | Verification |
|-----------|-------------|------------------|--------------|
| **I. Content-First Documentation** | Markdown, frontmatter, progressive complexity | T009, T025-T028 (frontmatter schema), T010-T011 (chapter organization) | Verify docs/ structure follows progressive complexity (chapter-01-foundations ‚Üí chapter-02-mechanics) |
| **II. Docusaurus Architecture** | Must use Docusaurus 3.x, docs/ structure | T002 (initialize Docusaurus 3.x), T010 (docs/ structure) | Verify `package.json` has `@docusaurus/core: ^3.x` |
| **III. GitHub Pages Deployment** | Automated CI/CD, link checking, accessibility testing | T055-T063 (GitHub Actions workflow), T056 (link validation), T058 (accessibility tests) | Verify `.github/workflows/deploy.yml` exists and runs quality gates |
| **VII. Test-First for Critical Paths** | Tests before implementation, red-green-refactor | T021-T024, T037-T040, T051-T054, T069-T073 (all üî¥ RED tests written FIRST) | Verify all test tasks marked üî¥ complete before implementation tasks |

**Constitutional Compliance Status**: ‚úÖ **PASS** - All principles addressed in task breakdown

---

## Notes

- **TDD Discipline**: All test tasks marked üî¥ MUST be written FIRST and FAIL before implementation
- **[P] Parallelization**: Tasks marked [P] can run concurrently (different files, no shared dependencies)
- **[Story] Traceability**: Every implementation task labeled with user story (US1-US4) for rollback and progress tracking
- **File Paths**: All tasks include exact file paths for precise traceability
- **Human Review**: üõë checkpoints after each phase ensure quality and alignment before proceeding
- **Context7**: üìö markers indicate where to use MCP server for documentation lookups
- **Commit Strategy**: Commit after each task or logical group (e.g., all tests for a story, all content files for a chapter)
- **Rollback**: Git-based rollback enables phase-level, story-level, or task-level rollback as needed

---

**Task Breakdown Status**: ‚úÖ COMPLETE - Ready for implementation (120 tasks, 7 phases, 4 user stories, TDD workflow)
